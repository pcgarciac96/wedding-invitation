---
import Countdown from "./Countdown.astro";
import EventDetails from "./EventDetails.astro";
import FiestaSection from "./FiestaSection.astro";
interface Props {
  id?: string;
  weddingDateISO: string; // "YYYY-MM-DDT16:00:00-05:00"
  weddingDateText: string; // "14 de febrero de 2026"
  timeText?: string; // "4:00 p. m."
  venueText?: string; // "Hacienda El Encanto"
  showAdultsOnly?: boolean;
  showSeatNote?: boolean;
}

const {
  id = "invite-content",
  weddingDateISO,
  weddingDateText,
  timeText = "4:00 p. m.",
  venueText = "Hacienda El Encanto",
  showAdultsOnly = true,
  showSeatNote = true,
} = Astro.props;
---

<!--
  Wrapper con tema (variables CSS). Cambia --accent una sola vez
  para ajustar toda la paleta del bloque ‚ÄúInvitados‚Äù.
-->
<section
  id={id}
  data-invite-theme
  class="hidden opacity-0 transition-opacity duration-300"
>
  <section class="mx-auto w-full max-w-4xl bg-[#FDF4D4]">
    <!-- Hero: foto + textos superpuestos -->
    <div
      class="relative w-full overflow-hidden aspect-[9/19] md:aspect-auto md:h-[72vh]"
    >
      <!-- Foto de portada (si est√° en /public usa ruta absoluta) -->
      <img
        src="/Heroimage.JPG"
        alt="Daniela y Pablo"
        class="absolute inset-0 h-full w-full object-cover"
        loading="eager"
        decoding="async"
      />

      <!-- Texto -->
      <div
        class="absolute inset-0 flex flex-col items-center text-center px-4 pt-6 md:pt-10 text-white drop-shadow-[0_1px_6px_rgba(0,0,0,.35)]"
      >
        <p class="font-italianno italic text-4xl leading-relaxed md:text-5xl">
          ‚ÄúCuando estamos juntos, cualquier rinc√≥n de la tierra es cielo‚Äù
        </p>

        <div class="w-60 md:w-80 h-px my-3 md:my-5 bg-white/80"></div>

        <h1 class="font-italianno text-4xl md:text-6xl tracking-wide">
          Daniela <span class="mx-2">&</span> Pablo
        </h1>

        <!-- Fecha con l√≠neas a los lados -->
        <span
          class="mt-1 md:mt-2 text-sm md:text-base font-semibold relative inline-flex items-center px-10"
        >
          <span
            class="absolute left-0 top-1/2 -translate-y-1/2 w-8 md:w-16 h-px bg-white/70"
          ></span>
          {weddingDateText}
          <span
            class="absolute right-0 top-1/2 -translate-y-1/2 w-8 md:w-16 h-px bg-white/70"
          ></span>
        </span>

        <!-- Lugar y hora (opcional) -->
      </div>
    </div>

    <!-- Cuenta regresiva -->
    <Countdown dateISO={weddingDateISO} />

    <!-- INVITADOS (nuevo bloque) -->
    <section
      aria-labelledby="guests-title"
      class="mx-auto my-10 max-w-xl text-center px-4"
    >
      <div class="flex justify-center ">
        <div class="flex justify-center border-y border-[#B88358] w-48">
          <h2
            id="guests-title"
            class="relative inline-block font-italianno text-6xl md:text-4xl text-[var(--accent)]"
          >
            <span
              class="before:absolute before:-top-3 before:left-1/2 before:-translate-x-1/2 before:block before:h-px before:w-40 before:bg-[color:var(--accent)/.7]
                 after:absolute after:-bottom-3 after:left-1/2 after:-translate-x-1/2 after:block after:h-px after:w-40 after:bg-[color:var(--accent)/.7]"
            >
              Invitados
            </span>
          </h2>
        </div>
      </div>

      <!-- c√≠rculo con n√∫mero de cupos -->
      <div class="mt-8 flex justify-center">
        <div
          id="guest-seats-circle"
          class="flex justify-center items-center h-14 w-14  rounded-full bg-[#E6DDC0] text-[#B88358] font-italianno  text-4xl"
          aria-label="N√∫mero de invitados"
        >
          ‚Äî
        </div>
      </div>

      <!-- lista de nombres -->
      <ul id="guest-names-list" class="mt-6 space-y-3">
        <!-- JS insertar√° <li> por cada invitado -->
      </ul>

      <!-- nota -->
      <p class="mt-6 mx-auto max-w-md  text-[#B88358] font-italianno  text-3xl">
        ‚ÄúQueremos que sea una celebraci√≥n √≠ntima y especial, por eso hemos
        limitado la lista de invitados‚Äù
      </p>

      <!-- error -->
      <p
        id="guest-error"
        class="mx-auto mt-4 max-w-xl rounded-xl border border-rose-300/40 bg-rose-900/20 px-4 py-2 text-rose-900 hidden"
      >
        No pudimos encontrar tu invitaci√≥n. Verifica el enlace üíå
      </p>
    </section>

    <EventDetails
      dateLine1="S√°bado 14 de Marzo de 2026"
      dateLine2="4:00 pm"
      venueName="Amazilia Hotel"
      venueAddress="V√≠a Pereira a Cerritos Entrada 8, Cafelia, Risaralda"
      rsvpHref="https://wa.me/573204609701?text=Hola%20confirmo%20asistencia%20a%20la%20boda"
      mapsHref="https://maps.google.com/?q=Amazilia%20Hotel"
    />

    <FiestaSection
      intro="Hagamos juntos una fiesta √©pica. Aqu√≠ algunos detalles a tener en cuenta."
      dressHref="#dresscode"
      rulesHref="#restricciones"
      giftsHref="#regalos"
    />

    <footer class="pb-8 text-center text-sm text-[var(--notes-muted)]">
      Dress code: Elegante
    </footer>
  </section>

  <style>
    [data-invite-theme] {
      /* Cambia solo --accent para ajustar todo el bloque */
      --accent: #b2795c;

      --circle-bg: #d9cdb9b3; /* sepia claro (70%) */
      --circle-fg: #8b6f5b;

      --tag-bg: #d9cdb9b3;
      --tag-fg: #6f5a4e;

      --note-fg: #9a6e59;
      --notes-muted: #7b6b5e;
    }
  </style>
</section>
